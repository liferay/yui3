YUI.add("content-editable",function(r,t){var i=r.Lang,s=r.Node,a="contentready",o="ready",d="blur",u="container",c="contentEditable",h="focus",l="host",e="innerHTML",_="paste",g="Text",f=function(){f.superclass.constructor.apply(this,arguments)};r.extend(f,r.Plugin.Base,{_rendered:null,_instance:null,initializer:function(){var t=this.get(l);t&&(t.frame=this),this._eventHandles=[],this.publish(o,{emitFacade:!0,defaultFn:this._defReadyFn})},destructor:function(){new r.EventHandle(this._eventHandles).detach(),this._container.removeAttribute(c)},_onDomEvent:function(t){var e;((t.frameX=t.frameY=0)<t.pageX||0<t.pageY)&&"key"!==t.type.substring(0,3)&&(e=this._container.getXY(),t.frameX=e[0],t.frameY=e[1]),t.frameTarget=t.target,t.frameCurrentTarget=t.currentTarget,t.frameEvent=t,this.fire("dom:"+t.type,t)},_DOMPaste:function(t){var e=this.getInstance(),n="",e=e.config.win;t._event.originalTarget&&(n=t._event.originalTarget),t._event.clipboardData&&(n=t._event.clipboardData.getData(g)),e.clipboardData&&""===(n=e.clipboardData.getData(g))&&(e.clipboardData.setData(g,n)||(n=null)),t.frameTarget=t.target,t.frameCurrentTarget=t.currentTarget,(t.frameEvent=t).clipboardData=n?{data:n,getData:function(){return n}}:null,this.fire("dom:paste",t)},_defReadyFn:function(){var s=this.getInstance(),a=this.get(u);r.each(f.DOM_EVENTS,function(t,e){var n=r.bind(this._onDomEvent,this),i=r.UA.ie&&0<f.THROTTLE_TIME?r.throttle(n,f.THROTTLE_TIME):n;s.Node.DOM_EVENTS[e]||(s.Node.DOM_EVENTS[e]=1),1===t&&e!==h&&e!==d&&e!==_&&("key"===e.substring(0,3)?this._eventHandles.push(a.on(e,i,a)):this._eventHandles.push(a.on(e,n,a)))},this),s.Node.DOM_EVENTS.paste=1,this._eventHandles.push(a.on(_,r.bind(this._DOMPaste,this),a),a.on(h,r.bind(this._onDomEvent,this),a),a.on(d,r.bind(this._onDomEvent,this),a)),s.__use=s.use,s.use=r.bind(this.use,this)},_onContentReady:function(t){var e,n;this._ready||(this._ready=!0,e=this.getInstance(),n=r.clone(this.get("use")),this.fire(a),t&&(e.config.doc=s.getDOMNode(t.target)),n.push(r.bind(function(){e.EditorSelection&&(e.EditorSelection.DEFAULT_BLOCK_TAG=this.get("defaultblock"),e.EditorSelection.ROOT=this.get(u)),this.fire(o)},this)),e.use.apply(e,n))},_getDefaultBlock:function(){return this._getHostValue("defaultblock")},_getDir:function(){return this._getHostValue("dir")},_getExtraCSS:function(){return this._getHostValue("extracss")},_getHTML:function(){var t;return t=this._ready?this.get(u).get(e):t},_getHostValue:function(t){var e=this.get(l);if(e)return e.get(t)},_setHTML:function(t){return this._ready?this.get(u).set(e,t):this.once(a,r.bind(this._setHTML,this,t)),t},_setLinkedCSS:function(t){return this._ready?this.getInstance().Get.css(t):this.once(a,r.bind(this._setLinkedCSS,this,t)),t},_setDir:function(t){return this._ready?this.get(u).setAttribute("dir",t):this.once(a,r.bind(this._setDir,this,t)),t},_setExtraCSS:function(t){var e;return this._ready?t&&(e=this.getInstance().one("head"),this._extraCSSNode&&this._extraCSSNode.remove(),this._extraCSSNode=s.create("<style>"+t+"</style>"),e.append(this._extraCSSNode)):this.once(a,r.bind(this._setExtraCSS,this,t)),t},_setLang:function(t){return this._ready?this.get(u).setAttribute("lang",t):this.once(a,r.bind(this._setLang,this,t)),t},_instanceLoaded:function(t){this._instance=t,this._onContentReady();t=this._instance.config.doc;if(!r.UA.ie)try{t.execCommand("styleWithCSS",!1,!1),t.execCommand("insertbronreturn",!1,!1)}catch(e){}},_validateLinkedCSS:function(t){return i.isString(t)||i.isArray(t)},use:function(){var t=this.getInstance(),e=r.Array(arguments),n=!1;return(n=i.isFunction(e[e.length-1])?e.pop():n)&&e.push(function(){n.apply(t,arguments)}),t.__use.apply(t,e)},delegate:function(t,e,n,i){var s=this.getInstance();return!!s&&(i||(i=n,n=this.get(u)),s.delegate(t,e,n,i))},getInstance:function(){return this._instance},render:function(t){var e,n;return this._rendered||(t&&this.set(u,t),container=this.get(u),container||(container=s.create(f.HTML),r.one("body").prepend(container),this.set(u,container)),this._rendered=!0,this._container.setAttribute(c,!0),e=r.clone(this.get("use")),t=r.bind(function(){(n=YUI()).host=this.get(l),n.use("node-base",r.bind(this._instanceLoaded,this))},this),e.push(t),r.use.apply(r,e)),this},focus:function(){return this._container.focus(),this},show:function(){return this._container.show(),this.focus(),this},hide:function(){return this._container.hide(),this}},{THROTTLE_TIME:100,DOM_EVENTS:{click:1,dblclick:1,focusin:1,focusout:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseup:1,paste:1},HTML:"<div></div>",NAME:"contentEditable",NS:c,ATTRS:{dir:{lazyAdd:!1,validator:i.isString,setter:"_setDir",valueFn:"_getDir"},container:{setter:function(t){return this._container=r.one(t),this._container}},content:{getter:"_getHTML",lazyAdd:!1,setter:"_setHTML",validator:i.isString,value:"<br>"},defaultblock:{validator:i.isString,value:"p",valueFn:"_getDefaultBlock"},extracss:{lazyAdd:!1,setter:"_setExtraCSS",validator:i.isString,valueFn:"_getExtraCSS"},id:{writeOnce:!0,getter:function(t){return t=t||"inlineedit-"+r.guid()}},lang:{validator:i.isString,setter:"_setLang",lazyAdd:!1,value:"en-US"},linkedcss:{setter:"_setLinkedCSS",validator:"_validateLinkedCSS"},node:{readOnly:!0,value:null,getter:function(){return this._container}},use:{validator:i.isArray,writeOnce:!0,value:["node-base","editor-selection","stylesheet"]}}}),r.namespace("Plugin"),r.Plugin.ContentEditable=f},"@VERSION@",{requires:["node-base","editor-selection","stylesheet","plugin"]});