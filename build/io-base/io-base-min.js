YUI.add("io-base",function(l,t){var e,r,n,p,c=["start","complete","end","success","failure","progress"],h=["status","statusText","responseText","responseXML"],s=l.config.win,i=0;function o(t){var e=this;e._uid="io:"+i++,e._init(t),l.io._map[e._uid]=e}o.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(t){var e,r,n=this;for(n.cfg=t||{},l.augment(n,l.EventTarget),e=0,r=c.length;e<r;++e)n.publish("io:"+c[e],l.merge({broadcast:1},t)),n.publish("io-trn:"+c[e],t)},_create:function(e,t){var n=this,r={id:l.Lang.isNumber(t)?t:n._id++,uid:n._uid},t=e.xdr?e.xdr.use:null,i=e.form&&e.form.upload?"iframe":null;return"native"===t&&(t=l.UA.ie&&!p?"xdr":null,n.setHeader("X-Requested-With")),(r=(t=t||i)?l.merge(l.IO.customTransport(t),r):l.merge(l.IO.defaultTransport(),r)).notify&&(e.notify=function(t,e,r){n.notify(t,e,r)}),t||s&&s.FormData&&e.data instanceof s.FormData&&(r.c.upload.onprogress=function(t){n.progress(r,t,e)},r.c.onload=function(t){n.load(r,t,e)},r.c.onerror=function(t){n.error(r,t,e)},r.upload=!0),r},_destroy:function(t){!s||t.notify||t.xdr||(e&&!t.upload?t.c.onreadystatechange=null:t.upload?(t.c.upload.onprogress=null,t.c.onload=null,t.c.onerror=null):l.UA.ie&&!t.e&&t.c.abort()),t.c=null},_evt:function(t,e,r){var n,i=this,s=r.arguments,o=i.cfg.emitFacade,a="io:"+t,u="io-trn:"+t;this.detach(u),e.e&&(e.c={status:0,statusText:e.e}),n=[o?{id:e.id,data:e.c,cfg:r,arguments:s}:e.id],o||(t!==c[0]&&t!==c[2]&&(e.evt?n.push(e.evt):n.push(e.c)),s&&n.push(s)),n.unshift(a),i.fire.apply(i,n),r.on&&(n[0]=u,i.once(u,r.on[t],r.context||l),i.fire.apply(i,n))},start:function(t,e){this._evt(c[0],t,e)},complete:function(t,e){this._evt(c[1],t,e)},end:function(t,e){this._evt(c[2],t,e),this._destroy(t)},success:function(t,e){this._evt(c[3],t,e),this.end(t,e)},failure:function(t,e){this._evt(c[4],t,e),this.end(t,e)},progress:function(t,e,r){t.evt=e,this._evt(c[5],t,r)},load:function(t,e,r){t.evt=e.target,this._evt(c[1],t,r)},error:function(t,e,r){t.evt=e,this._evt(c[4],t,r)},_retry:function(t,e,r){return this._destroy(t),r.xdr.use="flash",this.send(e,r,t.id)},_concat:function(t,e){return t+=(-1===t.indexOf("?")?"?":"&")+e},setHeader:function(t,e){e?this._headers[t]=e:delete this._headers[t]},_setHeaders:function(r,n){n=l.merge(this._headers,n),l.Object.each(n,function(t,e){"disable"!==t&&r.setRequestHeader(e,n[e])})},_startTimeout:function(t,e){var r=this;r._timeout[t.id]=setTimeout(function(){r._abort(t,"timeout")},e)},_clearTimeout:function(t){clearTimeout(this._timeout[t]),delete this._timeout[t]},_result:function(t,e){var r;try{r=t.c.status}catch(n){r=0}200<=r&&r<300||304===r||1223===r?this.success(t,e):this.failure(t,e)},_rS:function(t,e){var r=this;4===t.c.readyState&&(e.timeout&&r._clearTimeout(t.id),setTimeout(function(){r.complete(t,e),r._result(t,e)},0))},_abort:function(t,e){t&&t.c&&(t.e=e,t.c.abort())},send:function(t,e,r){var n,i,s,o,a,u=this,c=t,d={};if(e=e?l.Object(e):{},n=u._create(e,r),r=e.method?e.method.toUpperCase():"GET",o=e.sync,a=e.data,!l.Lang.isObject(a)||a.nodeType||n.upload||l.QueryString&&l.QueryString.stringify&&(e.data=a=l.QueryString.stringify(a)),e.form){if(e.form.upload)return u.upload(n,t,e);a=u._serialize(e.form,a)}if(a=a||"")switch(r){case"GET":case"HEAD":case"DELETE":c=u._concat(c,a),a="";break;case"POST":case"PUT":e.headers=l.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},e.headers)}if(n.xdr)return u.xdr(c,n,e);if(n.notify)return n.c.send(n,t,e);o||n.upload||(n.c.onreadystatechange=function(){u._rS(n,e)});try{if(n.c.open(r,c,!o,e.username||null,e.password||null),u._setHeaders(n.c,e.headers||{}),u.start(n,e),e.xdr&&e.xdr.credentials&&p&&(n.c.withCredentials=!0),n.c.send(a),o){for(i=0,s=h.length;i<s;++i)d[h[i]]=n.c[h[i]];return d.getAllResponseHeaders=function(){return n.c.getAllResponseHeaders()},d.getResponseHeader=function(t){return n.c.getResponseHeader(t)},u.complete(n,e),u._result(n,e),d}}catch(f){if(n.xdr)return u._retry(n,t,e);u.complete(n,e),u._result(n,e)}return e.timeout&&u._startTimeout(n,e.timeout),{id:n.id,abort:function(){return!!n.c&&u._abort(n,"abort")},isInProgress:function(){return!!n.c&&n.c.readyState%4},io:u}}},l.io=function(t,e){var r=l.io._map["io:0"]||new o;return r.send.apply(r,[t,e])},l.io.header=function(t,e){(l.io._map["io:0"]||new o).setHeader(t,e)},l.IO=o,l.io._map={},e=s&&s.XMLHttpRequest,r=s&&s.XDomainRequest,n=s&&s.ActiveXObject,p=e&&"withCredentials"in new XMLHttpRequest,l.mix(l.IO,{_default:"xhr",defaultTransport:function(t){if(!t)return{c:l.IO.transports[l.IO._default](),notify:"xhr"!==l.IO._default};l.IO._default=t},transports:{xhr:function(){return e?new XMLHttpRequest:n?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return r?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(t){var e={c:l.IO.transports[t]()};return e["xdr"===t||"flash"===t?"xdr":"notify"]=!0,e}}),l.mix(l.IO.prototype,{notify:function(t,e,r){switch(t){case"timeout":case"abort":case"transport error":e.c={status:0,statusText:t},t="failure";default:this[t].apply(this,[e,r])}}})},"@VERSION@",{requires:["event-custom-base","querystring-stringify-simple"]});